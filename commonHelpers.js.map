{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst form = document.querySelector('.search-form');\nconst gallary = document.querySelector('.gallary');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', loadMoreClick);\n\nlet numberPage;\nlet wordForSearch = '';\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  numberPage = 1;\n\n  wordForSearch = event.currentTarget.elements.input.value;\n  gallary.innerHTML = '';\n  gallary.insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n\n  axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        key: '42677735-fe61580d2fc9bff74664cab68',\n        q: wordForSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 130,\n        page: numberPage,\n      },\n    })\n    .then(response => {\n      gallary.nextElementSibling.remove();\n      gallary.insertAdjacentHTML('beforeend', createContent(response));\n      if (gallary.children.length < response.data.totalHits) {\n        console.log(111);\n        loadMoreBtn.classList.remove('visually-hidden');\n      } else {\n        loadMoreBtn.classList.add('visually-hidden');\n      }\n    });\n  form.reset();\n}\n\nfunction loadMoreClick(event) {\n  numberPage += 1;\n  gallary.insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n\n  axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        key: '42677735-fe61580d2fc9bff74664cab68',\n        q: wordForSearch,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 130,\n        page: numberPage,\n      },\n    })\n    .then(response => {\n      gallary.nextElementSibling.remove();\n      gallary.insertAdjacentHTML('beforeend', createContent(response));\n      if (gallary.children.length < response.data.totalHits) {\n        console.log(222);\n        loadMoreBtn.classList.remove('visually-hidden');\n      } else {\n        loadMoreBtn.classList.add('visually-hidden');\n      }\n    });\n}\n\nfunction createContent({ data: { hits: arrImages } }) {\n  return arrImages\n    .map(\n      image =>\n        `<li class=\"gallary-item\">\n      <a class=\"gallary-item-link\" href=\"${image.largeImageURL}\"><img\n        class=\"gallary-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      /></a>\n         <ul class=\"info-list\">\n          <li class=\"info-list-item\">\n            <h2 class=\"list-item-title\">Likes</h2>\n            <p class=\"list-item-info\">${image.likes}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Views</h2>\n            <p class=\"list-item-info\">${image.views}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Comments</h2>\n            <p class=\"list-item-info\">${image.comments}</p>\n          </li>\n          <li class=\"info-box-list-item\">\n            <h2 class=\"list-item-title\">Downloads</h2>\n            <p class=\"list-item-info\">${image.downloads}</p>\n          </li>\n        </ul>\n       </li>`\n    )\n    .join('');\n}\n"],"names":["form","gallary","loadMoreBtn","handleSubmit","loadMoreClick","numberPage","wordForSearch","event","axios","response","createContent","arrImages","image"],"mappings":"svBAEA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,gBAAgB,EAC3DF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAa,EAEnD,IAAIC,EACAC,EAAgB,GAEpB,SAASH,EAAaI,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAa,EAEbC,EAAgBC,EAAM,cAAc,SAAS,MAAM,MACnDN,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,WAAY,8BAA8B,EAErEO,EACG,IAAI,2BAA4B,CAC/B,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,IACV,KAAMD,CACP,CACP,CAAK,EACA,KAAKI,GAAY,CAChBR,EAAQ,mBAAmB,SAC3BA,EAAQ,mBAAmB,YAAaS,EAAcD,CAAQ,CAAC,EAC3DR,EAAQ,SAAS,OAASQ,EAAS,KAAK,WAC1C,QAAQ,IAAI,GAAG,EACfP,EAAY,UAAU,OAAO,iBAAiB,GAE9CA,EAAY,UAAU,IAAI,iBAAiB,CAEnD,CAAK,EACHF,EAAK,MAAK,CACZ,CAEA,SAASI,EAAcG,EAAO,CAC5BF,GAAc,EACdJ,EAAQ,mBAAmB,WAAY,8BAA8B,EAErEO,EACG,IAAI,2BAA4B,CAC/B,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,IACV,KAAMD,CACP,CACP,CAAK,EACA,KAAKI,GAAY,CAChBR,EAAQ,mBAAmB,SAC3BA,EAAQ,mBAAmB,YAAaS,EAAcD,CAAQ,CAAC,EAC3DR,EAAQ,SAAS,OAASQ,EAAS,KAAK,WAC1C,QAAQ,IAAI,GAAG,EACfP,EAAY,UAAU,OAAO,iBAAiB,GAE9CA,EAAY,UAAU,IAAI,iBAAiB,CAEnD,CAAK,CACL,CAEA,SAASQ,EAAc,CAAE,KAAM,CAAE,KAAMC,CAAW,CAAA,EAAI,CACpD,OAAOA,EACJ,IACCC,GACE;AAAA,2CACmCA,EAAM,aAAa;AAAA;AAAA,eAE/CA,EAAM,YAAY;AAAA,eAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,wCAKeA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,wCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,wCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,aAIlD,EACA,KAAK,EAAE,CACZ"}